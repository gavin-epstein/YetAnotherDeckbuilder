title(Machinations)
types(assassin, mechanical)
$Count=6
$currentCount=0
trigger(startofturn,do(addVar(self,currentCount,1)))
trigger(startofturn,if(($currentCount=$Count),(do(addStatus,stealth,1))))
trigger(startofturn,if(($currentCount=$Count),(do(setVar(self,currentCount,0)))))
text("Every $Count times you play this gain 1 stealth. (+, $Count, (*,-1,$currentCount)) remaining.");
removetrigger(endofturn,true,24);
cost(2)

title("Stiletto")
types(attack, assassin)
$Damage=6
cost(1)
$Range=1
text("Deal $Damage piercing backstab damage at range $Range.")
removetrigger(endofturn,true,1)
trigger(onPlay, do(damage, ($Damage,(piercing,backstab),(any),$Range),true))

title("Slow Poison")
types(attack,assassin)
cost(0)
$Range=3
$Damage=10
text("When this is discarded from play, deal $Damage backstab damage at range $Range.")
removetrigger(endofturn,true,3)
trigger(onRemoveFromPlay,do(damage, ($Damage,(backstab),(any),$Range),true))
